"use strict";var Battery=function(){function t(){}function e(t,e){var n,i,o=document,r="script";e=e||function(){},i=o.createElement(r),n=o.getElementsByTagName(r)[0],i.async=1,i.src=t,i.onload=function(){e()},i.onerror=function(){e(new Error("failed to load: "+t))},n.parentNode.insertBefore(i,n)}function n(t,e){new Function("!"+t+"()")(),e&&setTimeout(e,0)}function i(){this.noCache=this.load=!1,this.uri=this.key="",this.callbacks=[]}var o=function(){var e="__s",n=window.localStorage,i={setItem:t,getItem:t,removeItem:t,virtual:!0};if(!n)return i;try{return n.setItem(e,""),n.removeItem(e),n}catch(o){return i}}(),r=function(t){if(!o.virtual)for(var e in o)0===e.indexOf(t)&&o.removeItem(e)};return i.prototype={constructor:i,init:function(t){var e,n,i=t.config,c=t.callback,a=i.uri,s=i.key,u=i.noCache;return this.uri=a,this.key=s,void 0!==u&&(this.noCache=u),e=s+":"+a,n=o.getItem(e),this.storeKey=e,u||(this.code=n),c&&this.callbacks.push(c),n?c&&this.apply(c):setTimeout(function(){r(s)},0),this},add:function(t){var e=this.storeKey,i=t.toString();this.code=i,this.noCache||o.setItem(e,i),n(i)},apply:function(t){var i=this.code,o=this.uri,r=this.noCache,c=this.callbacks,a=this.load;i&&!r?n(i,t):(c.push(t),a||(e(o,function(){c.forEach(function(t){t()})}),this.load=!0))},clear:function(t){r(t)}},function(t,e){return(new i).init({config:t,callback:e})}}();