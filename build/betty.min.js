var Betty=function(t,e,n){function i(){}function o(t){if(!u.virtual)for(var e in u)0===e.indexOf(t)&&u.removeItem(e)}function r(t,n){var o,r,c="script";n=n||i,r=e.createElement(c),o=e.getElementsByTagName(c)[0],r.async=1,r.src=t,r.onload=function(){n()},r.onerror=function(){n(new Error("failed to load: "+t))},o.parentNode.insertBefore(r,o)}function c(t,e){new Function("!"+t+"()")(),e&&setTimeout(e,0)}function a(){this.noCache=this.loadRemote=!1,this.uri=this.key="",this.callbacks=[]}var s="BETTY",u=function(){var e=s,n=t.localStorage,o={setItem:i,getItem:i,removeItem:i,virtual:!0};if(!n)return o;try{return n.setItem(e,""),n.removeItem(e),n}catch(r){return o}}();return a.prototype={constructor:a,init:function(t){var e,i,r=t.config,c=t.callback,a=r.uri,h=r.key,f=r.noCache;return this.uri=a,this.key=h,f!==n&&(this.noCache=f),e=s+":"+h+":"+a,i=u.getItem(e),this.storeKey=e,f||(this.code=i),i?c&&this.apply(c):(setTimeout(function(){o(h)},0),c&&this.callbacks.push(c)),this},add:function(t){var e=this.storeKey,n=t.toString();this.code=n,this.noCache||u.setItem(e,n),c(n)},apply:function(t){var e=this.code,n=this.uri,i=this.noCache,o=this.callbacks,a=this.loadRemote;e&&!i?c(e,t):(o.push(t),a||(r(n,function(){o.forEach(function(t){t()})}),this.loadRemote=!0))},clear:function(t){o(s+":"+t)}},function(t,e){return(new a).init({config:t,callback:e})}}(window,document);